<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            display: flex;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
        }

        #left-panel {
            width: 25%;
            background-color: #f0f0f0;
            padding: 20px;
            box-sizing: border-box;
            overflow-y: auto;
        }

        #right-panel {
            width: 75%;
            padding: 20px;
            box-sizing: border-box;
            overflow-y: auto;
        }

        #note-list {
            list-style-type: none;
            padding: 0;
        }

        #note-list li {
            cursor: pointer;
            margin-bottom: 10px;
        }

        #note-editor {
            width: 100%;
            height: 15em; /* Minimum 15 lines in height */
            box-sizing: border-box;
            resize: none; /* Disable textarea resizing */
        }

        input,
        textarea {
            width: 100%;
            margin-bottom: 10px;
            padding: 8px;
            box-sizing: border-box;
        }

        button {
            margin-top: 10px;
            padding: 8px;
            cursor: pointer;
        }

        #search-notes {
            margin-top: 20px;
            padding: 8px;
            box-sizing: border-box;
        }
    </style>
    <title>Note Taking App</title>
</head>
<body>
    <div id="left-panel">
        <h2>Notes</h2>
        <input type="text" id="search-notes" placeholder="Search Notes" oninput="searchNotes()">
        <ul id="note-list"></ul>
    </div>
    <div id="right-panel">
        <input type="text" id="note-name" placeholder="Note Name">
        <textarea id="note-content" placeholder="Type your note here" rows="15"></textarea>
        <button onclick="saveNote()">Save Note</button>
        <button onclick="deleteNote()">Delete Note</button>
        <button onclick="downloadNote()">Download Note</button>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            loadNotes();
        });

        function saveNote() {
            let noteName = document.getElementById("note-name").value;
            let noteContent = document.getElementById("note-content").value;

            if (!noteName || !noteContent) {
                alert("Please enter both note name and content.");
                return;
            }

            let notes = JSON.parse(localStorage.getItem("notes")) || [];
            let existingNoteIndex = findNoteIndex(noteName);

            if (existingNoteIndex !== -1) {
                // Update existing note
                notes[existingNoteIndex].content = noteContent;
            } else {
                // Create a new note
                let newNote = { name: noteName, content: noteContent };
                notes.push(newNote);
            }

            localStorage.setItem("notes", JSON.stringify(notes));

            clearFields();
            loadNotes();
        }

        function deleteNote() {
            let noteName = document.getElementById("note-name").value;
            let notes = JSON.parse(localStorage.getItem("notes")) || [];
            let existingNoteIndex = findNoteIndex(noteName);

            if (existingNoteIndex !== -1) {
                // Remove the existing note
                notes.splice(existingNoteIndex, 1);
                localStorage.setItem("notes", JSON.stringify(notes));

                clearFields();
                loadNotes();
            }
        }

        function downloadNote() {
            let noteName = document.getElementById("note-name").value;
            let notes = JSON.parse(localStorage.getItem("notes")) || [];
            let existingNoteIndex = findNoteIndex(noteName);

            if (existingNoteIndex !== -1) {
                let note = notes[existingNoteIndex];
                let blob = new Blob([note.content], { type: "text/plain" });
                let link = document.createElement("a");
                link.href = window.URL.createObjectURL(blob);
                link.download = note.name + ".txt";
                link.click();
            }
        }

        function loadNotes() {
            let noteList = document.getElementById("note-list");
            noteList.innerHTML = "";

            let notes = JSON.parse(localStorage.getItem("notes")) || [];

            notes.forEach(function (note, index) {
                let listItem = document.createElement("li");
                listItem.textContent = note.name;
                listItem.onclick = function () {
                    displayNote(index);
                };
                noteList.appendChild(listItem);
            });
        }

        function displayNote(index) {
            let notes = JSON.parse(localStorage.getItem("notes")) || [];
            let selectedNote = notes[index];

            document.getElementById("note-name").value = selectedNote.name;
            document.getElementById("note-content").value = selectedNote.content;
        }

        function findNoteIndex(noteName) {
            let notes = JSON.parse(localStorage.getItem("notes")) || [];
            return notes.findIndex(note => note.name === noteName);
        }

        function clearFields() {
            document.getElementById("note-name").value = "";
            document.getElementById("note-content").value = "";
        }

        function searchNotes() {
            let searchInput = document.getElementById("search-notes").value.toLowerCase();
            let notes = JSON.parse(localStorage.getItem("notes")) || [];

            let filteredNotes = notes.filter(note => {
                return note.name.toLowerCase().includes(searchInput) || note.content.toLowerCase().includes(searchInput);
            });

            displaySearchResults(filteredNotes);
        }

        function displaySearchResults(filteredNotes) {
            let noteList = document.getElementById("note-list");
            noteList.innerHTML = "";

            filteredNotes.forEach(function (note, index) {
                let listItem = document.createElement("li");
                listItem.textContent = note.name;
                listItem.onclick = function () {
                    displayNote(index);
                };
                noteList.appendChild(listItem);
            });
        }
    </script>
</body>
</html>
